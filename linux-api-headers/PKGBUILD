pkgname=linux-api-headers
pkgver=6.18
#rc=-rc4
pkgrel=1
pkgdesc='Kernel headers sanitized for use in userspace'
arch=('x86_64')
url='https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot'
license=(GPL-2.0-only)
makedepends=(rsync)
source=(${url}/linux-${pkgver}.tar.gz)
#source=(${url}/linux-${pkgver}${rc}.tar.gz)
sha256sums=('SKIP')
options=('!debug' '!docs' '!emptydirs' '!staticlibs' 'ccache' 'buildflags' 'lto' 'makeflags' 'strip')

build() {
  cd linux-${pkgver}
  make -j20 mrproper
}

package() {
  cd linux-${pkgver}
  make -j20 INSTALL_HDR_PATH="${pkgdir}/usr" headers_install
  rm -r "${pkgdir}/usr/include/drm"
}
